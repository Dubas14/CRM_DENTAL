# Dental CRM - Backend API

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥—ñ—á–Ω–∏–º–∏ –∫–ª—ñ–Ω—ñ–∫–∞–º–∏ –∑ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª–æ–º —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø–∏—Å–∞–º–∏, –ø–∞—Ü—ñ—î–Ω—Ç–∞–º–∏, –ª—ñ–∫–∞—Ä—è–º–∏ —Ç–∞ —Ä–æ–∑–∫–ª–∞–¥–æ–º.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Laravel 12** (PHP 8.2)
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **Redis** - –∫–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ —á–µ—Ä–≥–∏
- **Meilisearch** - –ø–æ—à—É–∫
- **ClickHouse** - –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- **Laravel Sanctum** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è API
- **Spatie Permission** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–æ–ª—è–º–∏ —Ç–∞ –ø—Ä–∞–≤–∞–º–∏

## üìã –í–∏–º–æ–≥–∏

- PHP >= 8.2
- Composer
- PostgreSQL >= 14
- Redis >= 6.0
- Node.js >= 18 (–¥–ª—è asset bundling)

## üîß –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone <repository-url>
cd dental-crm-api
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
composer install
npm install
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è:

```bash
cp env.example.txt .env
```

–ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ –∫–ª—é—á –¥–æ–¥–∞—Ç–∫—É:

```bash
php artisan key:generate
```

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env` —Ñ–∞–π–ª —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ:
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (PostgreSQL)
- Redis
- Meilisearch
- Mail –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- Frontend URL

### 4. –ó–∞–ø—É—Å–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π —Ç–∞ seed

```bash
php artisan migrate --seed
```

### 5. –ó–∞–ø—É—Å–∫ development —Å–µ—Ä–≤–µ—Ä–∞

```bash
php artisan serve
```

API –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–µ –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:8000`

## üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–ü—Ä–æ–µ–∫—Ç –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Laravel Sail:

```bash
# –ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫
./vendor/bin/sail up -d

# –ú—ñ–≥—Ä–∞—Ü—ñ—ó
./vendor/bin/sail artisan migrate --seed

# –ó—É–ø–∏–Ω–∫–∞
./vendor/bin/sail down
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
dental-crm-api/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/Api/     # API –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Requests/Api/        # Form Request –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Resources/           # API Resources
‚îÇ   ‚îú‚îÄ‚îÄ Models/                  # Eloquent –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ Services/                # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Calendar/            # –°–µ—Ä–≤—ñ—Å–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Notifications/       # –°–µ—Ä–≤—ñ—Å–∏ –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π
‚îÇ   ‚îú‚îÄ‚îÄ Exceptions/              # –ö–∞—Å—Ç–æ–º–Ω—ñ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ Traits/                  # Reusable traits
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/              # –ú—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ seeders/                 # Seeders
‚îÇ   ‚îî‚îÄ‚îÄ factories/               # Model factories
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ api.php                  # API –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ web.php                  # Web –º–∞—Ä—à—Ä—É—Ç–∏
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ Feature/                 # Feature —Ç–µ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ Unit/                    # Unit —Ç–µ—Å—Ç–∏
‚îî‚îÄ‚îÄ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
    ‚îú‚îÄ‚îÄ API_DOCUMENTATION.md     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API
    ‚îî‚îÄ‚îÄ calendar_module_design.md # –î–∏–∑–∞–π–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—è
```

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Laravel Sanctum –∑ Bearer —Ç–æ–∫–µ–Ω–∞–º–∏.

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—É

```bash
POST /api/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password"
}
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—É

–î–æ–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫—É Authorization:

```
Authorization: Bearer YOUR_TOKEN_HERE
```

## üë• –†–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- **super_admin** - –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏
- **clinic_admin** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–≤–æ—ó–º–∏ –∫–ª—ñ–Ω—ñ–∫–∞–º–∏
- **doctor** - –ø–µ—Ä–µ–≥–ª—è–¥ —Å–≤–æ–≥–æ —Ä–æ–∑–∫–ª–∞–¥—É —Ç–∞ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤
- **registrar** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø–∏—Å–∞–º–∏

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª—ñ [docs/API_DOCUMENTATION.md](docs/API_DOCUMENTATION.md)

### –û—Å–Ω–æ–≤–Ω—ñ endpoints:

- `POST /api/login` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- `GET /api/patients` - –°–ø–∏—Å–æ–∫ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤
- `GET /api/doctors` - –°–ø–∏—Å–æ–∫ –ª—ñ–∫–∞—Ä—ñ–≤
- `GET /api/appointments` - –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å—ñ–≤
- `POST /api/appointments` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É
- `GET /api/doctors/{id}/slots` - –î–æ—Å—Ç—É–ø–Ω—ñ —Å–ª–æ—Ç–∏ –ª—ñ–∫–∞—Ä—è
- `GET /api/waitlist` - –õ–∏—Å—Ç –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

```bash
php artisan test
```

### –ó–∞–ø—É—Å–∫ –æ–∫—Ä–µ–º–∏—Ö —Ç–µ—Å—Ç—ñ–≤

```bash
php artisan test --filter=PatientTest
```

### Coverage

```bash
php artisan test --coverage
```

## üìä –ö–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### 1. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø–∏—Å–∞–º–∏
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–µ—Ä—ñ–π –∑–∞–ø–∏—Å—ñ–≤
- –°—Ç–∞—Ç—É—Å–∏: planned, confirmed, in_progress, completed, cancelled, no_show

### 2. –ö–∞–ª–µ–Ω–¥–∞—Ä —Ç–∞ —Ä–æ–∑–∫–ª–∞–¥
- –¢–∏–∂–Ω–µ–≤–∏–π —Ä–æ–∑–∫–ª–∞–¥ –ª—ñ–∫–∞—Ä—ñ–≤
- –í–∏–∫–ª—é—á–µ–Ω–Ω—è –∑—ñ —Ä–æ–∑–∫–ª–∞–¥—É (–≤—ñ–¥–ø—É—Å—Ç–∫–∏, —Ö–≤–æ—Ä–æ–±–∏)
- –î–æ—Å—Ç—É–ø–Ω—ñ —Å–ª–æ—Ç–∏ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —Ä–æ–±–æ—á–æ–≥–æ —á–∞—Å—É —Ç–∞ –ø–µ—Ä–µ—Ä–≤
- –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤ —Ç–∞ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è

### 3. –õ–∏—Å—Ç –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤ –ø—Ä–∏ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—ñ
- –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–Ω—ñ—Å—Ç—å
- –ù–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—Ä–æ –≤—ñ–ª—å–Ω—ñ —Å–ª–æ—Ç–∏

### 4. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞—Ü—ñ—î–Ω—Ç–∞–º–∏
- –ú–µ–¥–∏—á–Ω—ñ –∫–∞—Ä—Ç–∫–∏
- –Ü—Å—Ç–æ—Ä—ñ—è –≤—ñ–∑–∏—Ç—ñ–≤
- –ó—É–±–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞
- –ù–æ—Ç–∞—Ç–∫–∏

### 5. –ü—Ä–æ—Ü–µ–¥—É—Ä–∏
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä –∑ –∫—Ä–æ–∫–∞–º–∏
- –í–∏–º–æ–≥–∏ –¥–æ –∫–∞–±—ñ–Ω–µ—Ç—ñ–≤ —Ç–∞ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è
- –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å

## üîÑ –ß–µ—Ä–≥–∏ —Ç–∞ Job'–∏

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Laravel Queues –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π:

```bash
# –ó–∞–ø—É—Å–∫ queue worker
php artisan queue:work

# –ó Sail
./vendor/bin/sail artisan queue:work
```

## üìß –ù–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –∫–∞–Ω–∞–ª–∏:
- Email
- SMS (—á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–∏–π —à–ª—é–∑)

## üö® –õ–æ–≥—É–≤–∞–Ω–Ω—è

–õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `storage/logs/laravel.log`

–î–æ—Å—Ç—É–ø–Ω—ñ –∫–∞–Ω–∞–ª–∏:
- `single` - –æ–¥–∏–Ω —Ñ–∞–π–ª
- `daily` - —â–æ–¥–µ–Ω–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è
- `stack` - –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è –∫–∞–Ω–∞–ª—ñ–≤

## üîß –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫–µ—à—É
php artisan cache:clear
php artisan config:clear
php artisan route:clear

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
composer update

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞
php artisan make:controller Api/ExampleController

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó
php artisan make:migration create_example_table

# Rollback –º—ñ–≥—Ä–∞—Ü—ñ–π
php artisan migrate:rollback

# Fresh –º—ñ–≥—Ä–∞—Ü—ñ—ó –∑ seed
php artisan migrate:fresh --seed
```

## üìà –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –ö–µ—à—É–≤–∞–Ω–Ω—è

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Redis –¥–ª—è:
- –ö–µ—à—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Å–ª–æ—Ç—ñ–≤ –ª—ñ–∫–∞—Ä—ñ–≤
- Session storage
- Queue jobs

### –Ü–Ω–¥–µ–∫—Å–∏ –ë–î

–î–æ–¥–∞–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤:
- appointments: doctor_id, patient_id, start_at, status
- schedules: doctor_id, weekday
- waitlist: clinic_id, status

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

- Rate limiting –Ω–∞ API endpoints (60 req/min)
- –ñ–æ—Ä—Å—Ç–∫–∏–π rate limiting –¥–ª—è login (5 req/min)
- CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- SQL Injection –∑–∞—Ö–∏—Å—Ç —á–µ—Ä–µ–∑ Eloquent
- XSS –∑–∞—Ö–∏—Å—Ç —á–µ—Ä–µ–∑ Laravel

## üîÑ CI/CD

(–î–æ–¥–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –≤–∞—à–æ–≥–æ CI/CD pipeline)

## üìù Contributing

1. –°—Ç–≤–æ—Ä—ñ—Ç—å feature branch (`git checkout -b feature/AmazingFeature`)
2. Commit –∑–º—ñ–Ω–∏ (`git commit -m 'Add some AmazingFeature'`)
3. Push –≤ branch (`git push origin feature/AmazingFeature`)
4. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Pull Request

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

[MIT License](LICENSE)

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä–∏

- Your Name - Initial work

## üÜò –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø—Ä–æ–±–ª–µ–º —Å—Ç–≤–æ—Ä—ñ—Ç—å Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.
